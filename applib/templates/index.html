{% extends 'base.html' %}

{% block main %}

	<style>
		body {
		  font-family: "Lato", sans-serif;
		}
	
		.sidenav {
		  height: 100%;
		  width: 0;
		  position: fixed;
		  z-index: 1;
		  top: 0;
		  left: 0;
		  background-color: #F4F6F6;
		  overflow-x: hidden;
		  transition: 0.5s;
		  padding-top: 60px;
		}

		.sidenav a {
		  padding: 8px 8px 8px 32px;
		  text-decoration: none;
		  font-size: 15px;
		  color: black;
		  display: block;
		  transition: 0.3s;
		}

		.sidenav a:hover {
		  color: #FBFCFC;
		  background-color: #18BA4C
		}
		
		.sidenav .closebtn {
		  position: absolute;
		  top: 0;
		  right: 25px;
		  font-size: 36px;
		  margin-left: 50px;
		  color: #17202A
		}

		@media screen and (max-height: 450px) {
		  .sidenav {padding-top: 15px;}
		  .sidenav a {font-size: 18px;}
		}

	</style>

	<div id="mySidenav" class="sidenav">

		<a href="javascript:void(0)" class="closebtn" onclick="closeNav()" 	   onmouseover="this.style.backgroundColor='transparent';">
			&times;
		</a>

		<a href="{{url_for('admin.create_client')}}" class="btn">
			<i class="fas fa-user fa-lg"></i>
			&nbsp; Create Client
		</a>

		<a href="{{url_for('admin.client_invoice')}}" class="btn" style="margin-left: -11px;"><i class="fas fa-file-invoice fa-lg"></i>
			&nbsp; Add Invoice
		</a>

		<a href="{{url_for('admin.logout_app')}}" class="btn" id="logout" 	  style="margin-left: -42px;"><i class="fas fa-power-off"></i>
			&nbsp; Logout
		</a>

	</div>

	<div class="container">
		<div class="row">
			<div class="col-md-12">
				
				{% with messages = get_flashed_messages() %}
					{% if messages %}
					    <div class="row">
					    	<div class="col-md-12">
					       		{% for message in messages %}
					       		<div class="alert alert-primary" role="alert"> 
					       			{{ message }} 
					       		</div>
					       		{% endfor %}
					       	</div>
						</div>
					{% endif %} 
				{% endwith %}
				
				<div class="row">
					<div class="col-md-12">
						<span title="Invoice Menu" style="font-size:30px; cursor:pointer; color:green;" onclick="openNav()">&#9776;</span>
						
						<table class="table table-striped table-hover">
							<thead> 
								<tr>
									<th> DateTime </th>
									<th> Invoice ID </th>				
									<th> Customer Name </th>
									<th> Customer Email </th>
									<th colspan="2"> Total </th>
								</tr>
							</thead>
							<tbody> 
								{% for val in value %}
									<tr>

										<td> {{ val.date_value.strftime(
												"%Y-%m-%d %H:%M"
												)}} </td>
										<td> 
											<a href="{{url_for('admin.checkout', 			invoice_id=val.inv_id)}}" 
											title="View Invoice Details" 
											style="color: green"><b>{{ val.invoice_no }}</b> 
											</a> 
										</td>
										<td> {{ val.name | title }} </td>
										<td> {{ val.email }} </td>
										<td> {{ val.sub_total or '0.00' }} </td>
										<td> 
											<a href="{{url_for('admin.add_item', 				invoice_id=val.inv_id )}}" 			title="Add Invoice Item"> 
													<i class="fas fa-plus-square fa-lg" style="color: green"></i>
										  	</a>									
											&nbsp;
											<a href="{{url_for('admin.add_discount', 			invoice_id=val.inv_id)}}" 			title="Apply Discount To Invoice"><i class="fas fa-calculator fa-lg" style="		color: green"></i></a> 
											&nbsp;							 
										</td>
									</tr>
								{% else %}
									<tr>
										<td colspan="6"> <i> no records found ... </i> </td>
									</tr>
								{% endfor %}
							</tbody>
						</table>
					</div>
				</div>
			</div>
		</div>
	</div>
	<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
	<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js"></script>
	<script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js"></script>
	 <script type="text/javascript">
		function openNav() {
		  document.getElementById("mySidenav").style.width = "250px";
		}

		function closeNav() {
		  document.getElementById("mySidenav").style.width = "0";
		}
	</script>
{% endblock %}
